<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="../theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="Jerry Su" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="Apache2, Server, Tools, " />

<meta property="og:title" content="Apache2 Deploy Multi-sites "/>
<meta property="og:url" content="../articles/Apache2 Deploy Multi-sites.html" />
<meta property="og:description" content="Reason is the light and the light of life." />
<meta property="og:site_name" content="JERRYLSU" />
<meta property="og:article:author" content="Jerry Su" />
<meta property="og:article:published_time" content="2021-03-23T13:17:17+08:00" />
<meta name="twitter:title" content="Apache2 Deploy Multi-sites ">
<meta name="twitter:description" content="Reason is the light and the light of life.">

        <title>Apache2 Deploy Multi-sites  · JERRYLSU
</title>



    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="../"><span class=site-name>JERRYLSU</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       ..
                                    >Home</a>
                                </li>
                                <li ><a href="../pages/about.html">About</a></li>
                                <li ><a href="../categories.html">Categories</a></li>
                                <li ><a href="../tags.html">Tags</a></li>
                                <li ><a href="../archives.html">Archives</a></li>
                                <li><form class="navbar-search" action="../search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="../articles/Apache2 Deploy Multi-sites.html">
                Apache2 Deploy&nbsp;Multi-sites
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        show
        </nav>
    </div>
    <div class="span8 article-content">
            
            <p><a href="https://github.com/posativ/isso/issues/718">I submit the&nbsp;issue</a></p>
<h2 id="1-isso-as-systemd-service">1. Isso as systemd&nbsp;service</h2>
<p>Switch back to your privileged(root) user and create new service&nbsp;file.</p>
<p><code>vim /etc/systemd/system/isso.service</code><br>
Paste the following in&nbsp;it.</p>
<div class="highlight"><pre><span></span><code><span class="k">[Unit]</span>
<span class="na">Description</span><span class="o">=</span><span class="s">Isso Commenting Server</span>
<span class="na">After</span><span class="o">=</span><span class="s">network.target</span>
<span class="k">[Service]</span>
<span class="na">Type</span><span class="o">=</span><span class="s">simple</span>
<span class="na">User</span><span class="o">=</span><span class="s">isso</span>
<span class="na">WorkingDirectory</span><span class="o">=</span><span class="s">/home/isso</span>
<span class="na">ExecStart</span><span class="o">=</span><span class="s">/home/isso/.local/bin/isso -c /home/isso/isso.conf</span>
<span class="na">Restart</span><span class="o">=</span><span class="s">on-failure</span>
<span class="na">RestartSec</span><span class="o">=</span><span class="s">5</span>
<span class="k">[Install]</span>
<span class="na">WantedBy</span><span class="o">=</span><span class="s">multi-user.target</span>
</code></pre></div>

<p>Enable and start the&nbsp;service.</p>
<p><code>systemctl enable isso</code></p>
<p><code>systemctl start isso</code></p>
<p>Check the&nbsp;status.</p>
<p><code>systemctl status isso</code></p>
<ul>
<li>
<p>apache2&nbsp;Multi-sites</p>
</li>
<li>
<p>阿里云二级域名</p>
</li>
<li>
<p>Apach2 as reverse&nbsp;proxy</p>
</li>
</ul>
<h4 id="11">1.1&nbsp;新增站点配置文件</h4>
<div class="highlight"><pre><span></span><code><span class="err">!</span><span class="n">ls</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apache2</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">apache2</span><span class="o">.</span><span class="n">conf</span><span class="w">    </span><span class="n">core</span><span class="w">     </span><span class="n">mods</span><span class="o">-</span><span class="n">available</span><span class="w">  </span><span class="n">sites</span><span class="o">-</span><span class="n">available</span>
<span class="n">conf</span><span class="o">-</span><span class="n">available</span><span class="w">  </span><span class="n">envvars</span><span class="w">  </span><span class="n">mods</span><span class="o">-</span><span class="n">enabled</span><span class="w">    </span><span class="n">sites</span><span class="o">-</span><span class="n">enabled</span>
<span class="n">conf</span><span class="o">-</span><span class="n">enabled</span><span class="w">    </span><span class="n">magic</span><span class="w">    </span><span class="n">ports</span><span class="o">.</span><span class="n">conf</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="err">!</span><span class="n">cat</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apache2</span><span class="o">/</span><span class="n">apache2</span><span class="o">.</span><span class="n">conf</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c"># This is the main Apache server configuration file.  It contains the</span>
<span class="c"># configuration directives that give the server its instructions.</span>
<span class="c"># See http://httpd.apache.org/docs/2.4/ for detailed information about</span>
<span class="c"># the directives and /usr/share/doc/apache2/README.Debian about Debian specific</span>
<span class="c"># hints.</span>
<span class="c">#</span>
<span class="c">#</span>
<span class="c"># Summary of how the Apache 2 configuration works in Debian:</span>
<span class="c"># The Apache 2 web server configuration in Debian is quite different to</span>
<span class="c"># upstream&#39;s suggested way to configure the web server. This is because Debian&#39;s</span>
<span class="c"># default Apache2 installation attempts to make adding and removing modules,</span>
<span class="c"># virtual hosts, and extra configuration directives as flexible as possible, in</span>
<span class="c"># order to make automating the changes and administering the server as easy as</span>
<span class="c"># possible.</span>

<span class="c"># It is split into several files forming the configuration hierarchy outlined</span>
<span class="c"># below, all located in the /etc/apache2/ directory:</span>
<span class="c">#</span>
<span class="c">#   /etc/apache2/</span>
<span class="c">#   |-- apache2.conf</span>
<span class="c">#   |   `--  ports.conf</span>
<span class="c">#   |-- mods-enabled</span>
<span class="c">#   |   |-- *.load</span>
<span class="c">#   |   `-- *.conf</span>
<span class="c">#   |-- conf-enabled</span>
<span class="c">#   |   `-- *.conf</span>
<span class="c">#   `-- sites-enabled</span>
<span class="c">#       `-- *.conf</span>
<span class="c">#</span>
<span class="c">#</span>
<span class="c"># * apache2.conf is the main configuration file (this file). It puts the pieces</span>
<span class="c">#   together by including all remaining configuration files when starting up the</span>
<span class="c">#   web server.</span>
<span class="c">#</span>
<span class="c"># * ports.conf is always included from the main configuration file. It is</span>
<span class="c">#   supposed to determine listening ports for incoming connections which can be</span>
<span class="c">#   customized anytime.</span>
<span class="c">#</span>
<span class="c"># * Configuration files in the mods-enabled/, conf-enabled/ and sites-enabled/</span>
<span class="c">#   directories contain particular configuration snippets which manage modules,</span>
<span class="c">#   global configuration fragments, or virtual host configurations,</span>
<span class="c">#   respectively.</span>
<span class="c">#</span>
<span class="c">#   They are activated by symlinking available configuration files from their</span>
<span class="c">#   respective *-available/ counterparts. These should be managed by using our</span>
<span class="c">#   helpers a2enmod/a2dismod, a2ensite/a2dissite and a2enconf/a2disconf. See</span>
<span class="c">#   their respective man pages for detailed information.</span>
<span class="c">#</span>
<span class="c"># * The binary is called apache2. Due to the use of environment variables, in</span>
<span class="c">#   the default configuration, apache2 needs to be started/stopped with</span>
<span class="c">#   /etc/init.d/apache2 or apache2ctl. Calling /usr/bin/apache2 directly will not</span>
<span class="c">#   work with the default configuration.</span>


<span class="c"># Global configuration</span>
<span class="c">#</span>

<span class="c">#</span>
<span class="c"># ServerRoot: The top of the directory tree under which the server&#39;s</span>
<span class="c"># configuration, error, and log files are kept.</span>
<span class="c">#</span>
<span class="c"># NOTE!  If you intend to place this on an NFS (or otherwise network)</span>
<span class="c"># mounted filesystem then please read the Mutex documentation (available</span>
<span class="c"># at &lt;URL:http://httpd.apache.org/docs/2.4/mod/core.html#mutex&gt;);</span>
<span class="c"># you will save yourself a lot of trouble.</span>
<span class="c">#</span>
<span class="c"># Do NOT add a slash at the end of the directory path.</span>
<span class="c">#</span>
<span class="c">#ServerRoot &quot;/etc/apache2&quot;</span>

<span class="c">#</span>
<span class="c"># The accept serialization lock file MUST BE STORED ON A LOCAL DISK.</span>
<span class="c">#</span>
<span class="c">#Mutex file:${APACHE_LOCK_DIR} default</span>

<span class="c">#</span>
<span class="c"># The directory where shm and other runtime files will be stored.</span>
<span class="c">#</span>

<span class="nb">DefaultRuntimeDir</span><span class="w"> </span>${APACHE_RUN_DIR}

<span class="c">#</span>
<span class="c"># PidFile: The file in which the server should record its process</span>
<span class="c"># identification number when it starts.</span>
<span class="c"># This needs to be set in /etc/apache2/envvars</span>
<span class="c">#</span>
<span class="nb">PidFile</span><span class="w"> </span>${APACHE_PID_FILE}

<span class="c">#</span>
<span class="c"># Timeout: The number of seconds before receives and sends time out.</span>
<span class="c">#</span>
<span class="nb">Timeout</span><span class="w"> </span><span class="m">300</span>

<span class="c">#</span>
<span class="c"># KeepAlive: Whether or not to allow persistent connections (more than</span>
<span class="c"># one request per connection). Set to &quot;Off&quot; to deactivate.</span>
<span class="c">#</span>
<span class="nb">KeepAlive</span><span class="w"> </span><span class="k">On</span>

<span class="c">#</span>
<span class="c"># MaxKeepAliveRequests: The maximum number of requests to allow</span>
<span class="c"># during a persistent connection. Set to 0 to allow an unlimited amount.</span>
<span class="c"># We recommend you leave this number high, for maximum performance.</span>
<span class="c">#</span>
<span class="nb">MaxKeepAliveRequests</span><span class="w"> </span><span class="m">100</span>

<span class="c">#</span>
<span class="c"># KeepAliveTimeout: Number of seconds to wait for the next request from the</span>
<span class="c"># same client on the same connection.</span>
<span class="c">#</span>
<span class="nb">KeepAliveTimeout</span><span class="w"> </span><span class="m">5</span>


<span class="c"># These need to be set in /etc/apache2/envvars</span>
<span class="nb">User</span><span class="w"> </span>${APACHE_RUN_USER}
<span class="nb">Group</span><span class="w"> </span>${APACHE_RUN_GROUP}

<span class="c">#</span>
<span class="c"># HostnameLookups: Log the names of clients or just their IP addresses</span>
<span class="c"># e.g., www.apache.org (on) or 204.62.129.132 (off).</span>
<span class="c"># The default is off because it&#39;d be overall better for the net if people</span>
<span class="c"># had to knowingly turn this feature on, since enabling it means that</span>
<span class="c"># each client request will result in AT LEAST one lookup request to the</span>
<span class="c"># nameserver.</span>
<span class="c">#</span>
<span class="nb">HostnameLookups</span><span class="w"> </span><span class="k">Off</span>

<span class="c"># ErrorLog: The location of the error log file.</span>
<span class="c"># If you do not specify an ErrorLog directive within a &lt;VirtualHost&gt;</span>
<span class="c"># container, error messages relating to that virtual host will be</span>
<span class="c"># logged here.  If you *do* define an error logfile for a &lt;VirtualHost&gt;</span>
<span class="c"># container, that host&#39;s errors will be logged there and not here.</span>
<span class="c">#</span>
<span class="nb">ErrorLog</span><span class="w"> </span>${APACHE_LOG_DIR}/error.log

<span class="c">#</span>
<span class="c"># LogLevel: Control the severity of messages logged to the error_log.</span>
<span class="c"># Available values: trace8, ..., trace1, debug, info, notice, warn,</span>
<span class="c"># error, crit, alert, emerg.</span>
<span class="c"># It is also possible to configure the log level for particular modules, e.g.</span>
<span class="c"># &quot;LogLevel info ssl:warn&quot;</span>
<span class="c">#</span>
<span class="nb">LogLevel</span><span class="w"> </span><span class="k">warn</span>

<span class="c"># Include module configuration:</span>
<span class="nb">IncludeOptional</span><span class="w"> </span>mods-enabled/*.load
<span class="nb">IncludeOptional</span><span class="w"> </span>mods-enabled/*.conf

<span class="c"># Include list of ports to listen on</span>
<span class="nb">Include</span><span class="w"> </span>ports.conf


<span class="c"># Sets the default security model of the Apache2 HTTPD server. It does</span>
<span class="c"># not allow access to the root filesystem outside of /usr/share and /var/www.</span>
<span class="c"># The former is used by web applications packaged in Debian,</span>
<span class="c"># the latter may be used for local directories served by the web server. If</span>
<span class="c"># your system is serving content from a sub-directory in /srv you must allow</span>
<span class="c"># access here, or in any related virtual host.</span>
<span class="nt">&lt;Directory</span><span class="w"> </span><span class="s">/</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nb">Options</span><span class="w"> </span>FollowSymLinks
<span class="w">    </span><span class="nb">AllowOverride</span><span class="w"> </span><span class="k">None</span>
<span class="w">    </span><span class="nb">Require</span><span class="w"> </span><span class="k">all</span><span class="w"> </span>denied
<span class="nt">&lt;/Directory&gt;</span>

<span class="nt">&lt;Directory</span><span class="w"> </span><span class="s">/usr/share</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nb">AllowOverride</span><span class="w"> </span><span class="k">None</span>
<span class="w">    </span><span class="nb">Require</span><span class="w"> </span><span class="k">all</span><span class="w"> </span>granted
<span class="nt">&lt;/Directory&gt;</span>

<span class="nt">&lt;Directory</span><span class="w"> </span><span class="s">/var/www/</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nb">Options</span><span class="w"> </span>Indexes<span class="w"> </span>FollowSymLinks
<span class="w">    </span><span class="nb">AllowOverride</span><span class="w"> </span><span class="k">None</span>
<span class="w">    </span><span class="nb">Require</span><span class="w"> </span><span class="k">all</span><span class="w"> </span>granted
<span class="nt">&lt;/Directory&gt;</span>

<span class="c">#&lt;Directory /srv/&gt;</span>
<span class="c">#   Options Indexes FollowSymLinks</span>
<span class="c">#   AllowOverride None</span>
<span class="c">#   Require all granted</span>
<span class="c">#&lt;/Directory&gt;</span>




<span class="c"># AccessFileName: The name of the file to look for in each directory</span>
<span class="c"># for additional configuration directives.  See also the AllowOverride</span>
<span class="c"># directive.</span>
<span class="c">#</span>
<span class="nb">AccessFileName</span><span class="w"> </span>.htaccess

<span class="c">#</span>
<span class="c"># The following lines prevent .htaccess and .htpasswd files from being</span>
<span class="c"># viewed by Web clients.</span>
<span class="c">#</span>
<span class="nt">&lt;FilesMatch</span><span class="w"> </span><span class="s">&quot;^\.ht&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nb">Require</span><span class="w"> </span><span class="k">all</span><span class="w"> </span>denied
<span class="nt">&lt;/FilesMatch&gt;</span>


<span class="c">#</span>
<span class="c"># The following directives define some format nicknames for use with</span>
<span class="c"># a CustomLog directive.</span>
<span class="c">#</span>
<span class="c"># These deviate from the Common Log Format definitions in that they use %O</span>
<span class="c"># (the actual bytes sent including headers) instead of %b (the size of the</span>
<span class="c"># requested file), because the latter makes it impossible to detect partial</span>
<span class="c"># requests.</span>
<span class="c">#</span>
<span class="c"># Note that the use of %{X-Forwarded-For}i instead of %h is not recommended.</span>
<span class="c"># Use mod_remoteip instead.</span>
<span class="c">#</span>
<span class="nb">LogFormat</span><span class="w"> </span><span class="s2">&quot;%v:%p %h %l %u %t \&quot;%r\&quot; %&gt;s %O \&quot;%{Referer}i\&quot; \&quot;%{User-Agent}i\&quot;&quot;</span><span class="w"> </span>vhost_combined
<span class="nb">LogFormat</span><span class="w"> </span><span class="s2">&quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %O \&quot;%{Referer}i\&quot; \&quot;%{User-Agent}i\&quot;&quot;</span><span class="w"> </span>combined
<span class="nb">LogFormat</span><span class="w"> </span><span class="s2">&quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %O&quot;</span><span class="w"> </span>common
<span class="nb">LogFormat</span><span class="w"> </span><span class="s2">&quot;%{Referer}i -&gt; %U&quot;</span><span class="w"> </span>referer
<span class="nb">LogFormat</span><span class="w"> </span><span class="s2">&quot;%{User-agent}i&quot;</span><span class="w"> </span>agent

<span class="c"># Include of directories ignores editors&#39; and dpkg&#39;s backup files,</span>
<span class="c"># see README.Debian for details.</span>

<span class="c"># Include generic snippets of statements</span>
<span class="nb">IncludeOptional</span><span class="w"> </span>conf-enabled/*.conf

<span class="c"># Include the virtual host configurations:</span>
<span class="nb">IncludeOptional</span><span class="w"> </span>sites-enabled/*.conf

<span class="c"># vim: syntax=apache ts=4 sw=4 sts=4 sr noet</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="gh">#</span> Include the virtual host configurations:

IncludeOptional sites-enabled/*.conf
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1">#  blog.conf -&gt; ../sites-available/blog.conf配置的软链接，指向真实的配置</span>
<span class="err">!</span><span class="n">ls</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apache2</span><span class="o">/</span><span class="n">sites</span><span class="o">-</span><span class="n">enabled</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>blog.conf
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1"># 新建站点的配置文件，comments_blog.conf</span>
<span class="err">!</span><span class="n">ls</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apache2</span><span class="o">/</span><span class="n">sites</span><span class="o">-</span><span class="n">available</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>blog.conf  comments_blog.conf  default-ssl.conf
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="err">!</span><span class="n">cat</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apache2</span><span class="o">/</span><span class="n">sites</span><span class="o">-</span><span class="n">available</span><span class="o">/</span><span class="n">comments_blog</span><span class="o">.</span><span class="n">conf</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="nt">&lt;VirtualHost</span><span class="w"> </span><span class="s">*:80</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="c"># The ServerName directive sets the request scheme, hostname and port that</span>
<span class="w">    </span><span class="c"># the server uses to identify itself. This is used when creating</span>
<span class="w">    </span><span class="c"># redirection URLs. In the context of virtual hosts, the ServerName</span>
<span class="w">    </span><span class="c"># specifies what hostname must appear in the request&#39;s Host: header to</span>
<span class="w">    </span><span class="c"># match this virtual host. For the default virtual host (this file) this</span>
<span class="w">    </span><span class="c"># value is not decisive as it is used as a last resort host regardless.</span>
<span class="w">    </span><span class="c"># However, you must set it for any further virtual host explicitly.</span>
<span class="w">    </span><span class="c">#ServerName www.example.com</span>

<span class="w">    </span><span class="nb">ServerAdmin</span><span class="w"> </span>webmaster@localhost
<span class="w">    </span><span class="nb">ServerName</span><span class="w"> </span>http://www.comments.jerrylsu.net
<span class="w">    </span><span class="nb">DocumentRoot</span><span class="w"> </span><span class="sx">/var/www/blog/isso</span>

<span class="w">  </span><span class="c"># off表示开启反向代理，on表示开`启正向代理</span>
<span class="w">  </span><span class="nb">ProxyRequests</span><span class="w"> </span><span class="k">Off</span>
<span class="w">  </span><span class="c"># 将这个虚拟主机跳转到本机的8180端口</span>
<span class="w">  </span><span class="c"># Proxy for Isso commenting</span>
<span class="w">  </span><span class="nb">ProxyPass</span><span class="w"> </span>/<span class="w"> </span>http://localhost:8180/
<span class="w">  </span><span class="nb">ProxyPassReverse</span><span class="w"> </span>/<span class="w"> </span>http://localhost:8180/
<span class="w">  </span><span class="nt">&lt;Proxy</span><span class="w"> </span><span class="s">*</span><span class="nt">&gt;</span>
<span class="w">          </span><span class="nb">Order</span><span class="w"> </span>Deny,Allow
<span class="w">          </span><span class="nb">Allow</span><span class="w"> </span>from<span class="w"> </span><span class="k">all</span>
<span class="w">  </span><span class="nt">&lt;/Proxy&gt;</span>
<span class="w">    </span><span class="c"># Available loglevels: trace8, ..., trace1, debug, info, notice, warn,</span>
<span class="w">    </span><span class="c"># error, crit, alert, emerg.</span>
<span class="w">    </span><span class="c"># It is also possible to configure the loglevel for particular</span>
<span class="w">    </span><span class="c"># modules, e.g.</span>
<span class="w">    </span><span class="c">#LogLevel info ssl:warn</span>

<span class="w">    </span><span class="nb">ErrorLog</span><span class="w"> </span>${APACHE_LOG_DIR}/error.log
<span class="w">    </span><span class="nb">CustomLog</span><span class="w"> </span>${APACHE_LOG_DIR}/access.log<span class="w"> </span>combined

<span class="w">    </span><span class="c"># For most configuration files from conf-available/, which are</span>
<span class="w">    </span><span class="c"># enabled or disabled at a global level, it is possible to</span>
<span class="w">    </span><span class="c"># include a line for only one particular virtual host. For example the</span>
<span class="w">    </span><span class="c"># following line enables the CGI configuration for this host only</span>
<span class="w">    </span><span class="c"># after it has been globally disabled with &quot;a2disconf&quot;.</span>
<span class="w">    </span><span class="c">#Include conf-available/serve-cgi-bin.conf</span>
<span class="nt">&lt;/VirtualHost&gt;</span>

<span class="c"># vim: syntax=apache ts=4 sw=4 sts=4 sr noet</span>
</code></pre></div>

<h4 id="12">1.2&nbsp;建立软链接</h4>
<div class="highlight"><pre><span></span><code><span class="c1"># 为comments_blog.conf站点建立软链接</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">cd /etc/apache2/sites-enabled</span>

<span class="sd">#建立对应的软链接</span>
<span class="sd">sudo ln -s /etc/apache2/sites-available/comments_blog.conf /etc/apache2/sites-enabled/comments_blog.conf</span>

<span class="sd">-&gt; a2ensite comments_blog.conf</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="err">!</span><span class="n">ls</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apache2</span><span class="o">/</span><span class="n">sites</span><span class="o">-</span><span class="n">enabled</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>blog.conf  comments_blog.conf
</code></pre></div>

<h4 id="13-etchosts">1.3&nbsp;修改/etc/hosts</h4>
<div class="highlight"><pre><span></span><code><span class="err">!</span><span class="n">cat</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">hosts</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="mf">127.0.0.1</span><span class="w">   </span><span class="n">localhost</span>
<span class="p">::</span><span class="mf">1</span><span class="w"> </span><span class="n">localhost</span><span class="w"> </span><span class="n">ip6</span><span class="o">-</span><span class="n">localhost</span><span class="w"> </span><span class="n">ip6</span><span class="o">-</span><span class="n">loopback</span>
<span class="n">fe00</span><span class="p">::</span><span class="mf">0</span><span class="w"> </span><span class="n">ip6</span><span class="o">-</span><span class="n">localnet</span>
<span class="n">ff00</span><span class="p">::</span><span class="mf">0</span><span class="w"> </span><span class="n">ip6</span><span class="o">-</span><span class="n">mcastprefix</span>
<span class="n">ff02</span><span class="p">::</span><span class="mf">1</span><span class="w"> </span><span class="n">ip6</span><span class="o">-</span><span class="n">allnodes</span>
<span class="n">ff02</span><span class="p">::</span><span class="mf">2</span><span class="w"> </span><span class="n">ip6</span><span class="o">-</span><span class="n">allrouters</span>
<span class="mf">172.17.0.2</span><span class="w">  </span><span class="n">e7cac75317f0</span>
</code></pre></div>

<h4 id="14-apache2">1.4&nbsp;重启Apache2</h4>
<p>service apache2&nbsp;restart</p>
<div class="highlight"><pre><span></span><code>
</code></pre></div>

<p><a href="https://hackriculture.fr/isso-commentaires-auto-heberges-pour-pelican-et-autres-sites-statiques.html">https://hackriculture.fr/isso-commentaires-auto-heberges-pour-pelican-et-autres-sites-statiques.html</a></p>
<p><a href="https://therandombits.com/2018/12/how-to-add-isso-comments-to-your-site/">https://therandombits.com/2018/12/how-to-add-isso-comments-to-your-site/</a></p>
<p><a href="http://www.linuxidc.com/Linux/2017-05/143590.htm">http://www.linuxidc.com/Linux/2017-05/143590.htm</a></p>
<div class="highlight"><pre><span></span><code>
</code></pre></div>


             
 
                <p id="post-share-links">
    Share on:
      <a href="https://twitter.com/intent/tweet?text=Apache2%20Deploy%C2%A0Multi-sites&url=http%3A//www.jerrylsu.net/articles/Apache2%20Deploy%20Multi-sites.html&hashtags=apache2,server" target="_blank" rel="nofollow noopener noreferrer" title="Share on Twitter">Twitter</a>
 ❄       <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A//www.jerrylsu.net/articles/Apache2%20Deploy%20Multi-sites.html" target="_blank" rel="nofollow noopener noreferrer" title="Share on Facebook">Facebook</a>
 ❄       <a href="mailto:?subject=Apache2%20Deploy%C2%A0Multi-sites&amp;body=http%3A//www.jerrylsu.net/articles/Apache2%20Deploy%20Multi-sites.html" target="_blank" rel="nofollow noopener noreferrer" title="Share via Email">Email</a>

            
            







            <hr/>
<section>
    <h2>Related Posts</h2>
<ul class="related-posts-list">
<li><a href="../articles/Apache2 MacOS.html" title="Apache2 MacOS">Apache2 MacOS</a></li>
</ul>
<hr />
</section>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">« <a href="../articles/Python-Blinker.html" title="Previous: Python Blinker">Python Blinker</a></li>
                <li class="next-article"><a href="../articles/Isso-Comment-Server.html" title="Next: Isso-Comment-Server">Isso-Comment-Server</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section id="article-sidebar" class="span2">
    <h4>Reading Time</h4>
    <p>~6 min read</p>
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2021-03-23T13:17:17+08:00">Mar 23, 2021</time>
            <h4>Category</h4>
            <a class="category-link" href="../categories.html#tools-ref">Tools</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="../tags.html#apache2-ref">Apache2
                    <span class="superscript">2</span>
</a></li>
                <li><a href="../tags.html#server-ref">Server
                    <span class="superscript">2</span>
</a></li>
            </ul>
<h4>Contact</h4>
<div id="sidebar-social-link">
    <a href="mailto:[email protected]" title="sa517301@mail.ustc.edu.cn" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="Mail" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#328cff"/><path d="m250 186c-46 0-69 35-69 74 0 44 29 72 68 72 43 0 73-32 73-75 0-44-34-71-72-71zm-1-37c30 0 57 13 77 33 0-22 35-22 35 1v150c-1 10 10 16 16 9 25-25 54-128-14-187-64-56-149-47-195-15-48 33-79 107-49 175 33 76 126 99 182 76 28-12 41 26 12 39-45 19-168 17-225-82-38-68-36-185 67-248 78-46 182-33 244 32 66 69 62 197-2 246-28 23-71 1-71-32v-11c-20 20-47 32-77 32-57 0-108-51-108-108 0-58 51-110 108-110" fill="#fff"/></svg>
    </a>
    <a href="https://github.com/jerrylsu" title="Jerry Github" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
    <a href="https://www.youtube.com/@jerrysu780" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="YouTube" role="img" viewBox="0 0 512 512" fill="#ed1d24"><rect width="512" height="512" rx="15%"/><path d="m427 169c-4-15-17-27-32-31-34-9-239-10-278 0-15 4-28 16-32 31-9 38-10 135 0 174 4 15 17 27 32 31 36 10 241 10 278 0 15-4 28-16 32-31 9-36 9-137 0-174" fill="#fff"/><path d="m220 203v106l93-53"/></svg>
    </a>
    <a href="https://twitter.com/Jerrylsu666" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="Twitter" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1da1f3"/><path fill="#fff" d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
    </a>
    <a href="http://www.jerrylsu.net/feeds/all.atom.xml" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="RSS" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#f80"/><circle cx="145" cy="367" r="35" fill="#fff"/><path fill="none" stroke="#fff" stroke-width="60" d="M109 241c89 0 162 73 162 162M109 127c152 0 276 124 276 276"/></svg>
    </a>
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="../theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>