<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="../theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="Jerry Su" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="Machine Learning, Faiss, ML, " />

<meta property="og:title" content="Faiss "/>
<meta property="og:url" content="../articles/Faiss.html" />
<meta property="og:description" content="Reason is the light and the light of life." />
<meta property="og:site_name" content="JERRYLSU" />
<meta property="og:article:author" content="Jerry Su" />
<meta property="og:article:published_time" content="2021-09-17T10:17:17+08:00" />
<meta name="twitter:title" content="Faiss ">
<meta name="twitter:description" content="Reason is the light and the light of life.">

        <title>Faiss  · JERRYLSU
</title>



    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="../"><span class=site-name>JERRYLSU</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       ..
                                    >Home</a>
                                </li>
                                <li ><a href="../categories.html">Categories</a></li>
                                <li ><a href="../tags.html">Tags</a></li>
                                <li ><a href="../archives.html">Archives</a></li>
                                <li><form class="navbar-search" action="../search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="../articles/Faiss.html">
                Faiss
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        show
        </nav>
    </div>
    <div class="span8 article-content">
            
            <p>0.faiss Mac m1&nbsp;install源码安装？</p>
<p>master分支若不支持arm64，则下载使用下面 <code>pr：matsui528:workaround-for-aarch64-gcc</code>源码<code>git clone -b branch_name url</code>分支下载</p>
<p>https://github.com/facebookresearch/faiss/pull/1882</p>
<div class="highlight"><pre><span></span><code><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">facebookresearch</span><span class="o">/</span><span class="n">faiss</span><span class="o">/</span><span class="n">wiki</span><span class="o">/</span><span class="n">Installing</span><span class="o">-</span><span class="n">Faiss</span><span class="c1">#compiling-faiss-on-arm</span>
<span class="o">$</span><span class="w"> </span><span class="n">brew</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">llvm</span>
<span class="o">$</span><span class="w"> </span><span class="n">brew</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">swig</span>
<span class="o">$</span><span class="w"> </span><span class="n">cd</span><span class="w"> </span><span class="n">faiss</span>
<span class="o">$</span><span class="w"> </span><span class="n">cmake</span><span class="w"> </span><span class="o">-</span><span class="n">B</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">-</span><span class="n">DFAISS_ENABLE_GPU</span><span class="o">=</span><span class="n">OFF</span><span class="w"> </span><span class="o">-</span><span class="n">DFAISS_ENABLE_C_API</span><span class="o">=</span><span class="n">ON</span><span class="w"> </span><span class="o">-</span><span class="n">DBUILD_SHARED_LIBS</span><span class="o">=</span><span class="n">ON</span><span class="w"> </span><span class="o">-</span><span class="n">DBUILD_TESTING</span><span class="o">=</span><span class="n">OFF</span><span class="w"> </span><span class="o">-</span><span class="n">DFAISS_ENABLE_PYTHON</span><span class="o">=</span><span class="n">ON</span><span class="w"> </span><span class="o">.</span>
<span class="o">$</span><span class="w"> </span><span class="n">cmake</span><span class="w">  </span><span class="o">-</span><span class="n">B</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">-</span><span class="n">DCMAKE_CXX_COMPILER</span><span class="o">=</span><span class="n">clang</span><span class="o">++</span><span class="w"> </span><span class="o">-</span><span class="n">DFAISS_ENABLE_GPU</span><span class="o">=</span><span class="n">OFF</span><span class="w">  </span><span class="o">-</span><span class="n">DPython_EXECUTABLE</span><span class="o">=$</span><span class="p">(</span><span class="n">which</span><span class="w"> </span><span class="n">python3</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="n">DFAISS_OPT_LEVEL</span><span class="o">=</span><span class="n">generic</span><span class="w"> </span><span class="o">-</span><span class="n">DCMAKE_BUILD_TYPE</span><span class="o">=</span><span class="n">Release</span><span class="w"> </span><span class="o">-</span><span class="n">DBUILD_TESTING</span><span class="o">=</span><span class="n">ON</span>
<span class="o">$</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">faiss</span>
<span class="o">$</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">-</span><span class="n">j</span><span class="w"> </span><span class="n">swigfaiss</span>
<span class="o">$</span><span class="w"> </span><span class="n">cd</span><span class="w"> </span><span class="n">build</span><span class="o">/</span><span class="n">faiss</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">python3</span><span class="w"> </span><span class="n">setup</span><span class="o">.</span><span class="n">py</span><span class="w"> </span><span class="n">build</span>
<span class="o">$</span><span class="w"> </span><span class="k">export</span><span class="w"> </span><span class="n">PYTHONPATH</span><span class="o">=$</span><span class="n">PWD</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">faiss</span><span class="o">/</span><span class="n">python</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span>
</code></pre></div>

<p>1.faiss&nbsp;add是增量增加吗？</p>
<p>2.faiss&nbsp;index训练是在每次add新数据，都需要重新训练吗？</p>
<p><a href="https://github.com/facebookresearch/faiss/wiki">https://github.com/facebookresearch/faiss/wiki</a></p>
<p><a href="https://github.com/facebookresearch/faiss">https://github.com/facebookresearch/faiss</a></p>
<p><a href="https://www.bilibili.com/video/BV15v4118753?from=search&amp;seid=9527663759693988199&amp;spm_id_from=333.337.0.0">推荐召回算法-6如何从十亿数据找出你喜欢的内容-向量检索技术</a></p>
<p><a href="https://bbs.cvmart.net/articles/3887">使用 Faiss&nbsp;进行海量特征的相似度匹配</a></p>
<h3 id="1">1.生成随机数据</h3>
<p><code>Faiss</code>处理固定维数<code>d</code>的向量集合，通常为 10 到 100 秒。 这些集合可以存储在矩阵中。<br>
我们假设行优先存储，即。 向量编号 i 的第 j 个分量存储在矩阵的第 i 行、第 j 列中。 <code>Faiss</code>仅使用<code>32</code>位浮点矩阵。</p>
<ul>
<li>
<p><code>xb</code>用于数据库，它包含所有必须编入索引的向量，我们将在其中进行搜索。大小<code>nb * d</code></p>
</li>
<li>
<p><code>xq</code>用于查询向量，我们需要找到最近的邻居。大小<code>nq * d</code>，单个查询向量<code>nq = 1</code></p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">faiss</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">d</span> <span class="o">=</span> <span class="mi">64</span>              <span class="c1"># 向量维度</span>
<span class="n">nb</span> <span class="o">=</span> <span class="mi">1000</span>           <span class="c1"># 数据库大小</span>
<span class="n">nq</span> <span class="o">=</span> <span class="mi">10</span>             <span class="c1"># 待查询query大小</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>  <span class="c1"># 可复现</span>

<span class="n">xb</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="n">nb</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>  <span class="c1"># 均匀分布，数据类型必须float32</span>
<span class="n">xb</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">nb</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span>                  <span class="c1"># 给向量的第0维（即，索引维度）增加一个小的偏移量</span>

<span class="n">xq</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="n">nq</span><span class="p">,</span> <span class="n">d</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>
<span class="n">xq</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">nq</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">xb</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">xq</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>(1000, 64) (10, 64)
</code></pre></div>

<h3 id="2">2.创建索引并添加数据</h3>
<ul>
<li>
<p><code>Faiss</code>是围绕<code>Index</code>对象构建的。 它封装了一组数据库向量，并可选择对它们进行预处理以提高搜索效率。 <br>
索引有很多种，我们将使用最简单的版本，只对它们执行暴力<code>L2</code>距离搜索：<code>IndexFlatL2</code>。</p>
</li>
<li>
<p>所有索引在创建时都需要知道，操作向量的维数，即d。然后，大多数索引还需要一个训练阶段，以分析向量的分布。<br>
对于全量暴力搜索<code>IndexFlatL2</code>，可以跳过这个操作。</p>
</li>
<li>
<p><code>Index</code>创建和训练后，对其都可以执行两个操作：<code>add</code>和<code>search</code>。</p>
</li>
<li>
<p><code>index.add</code>向索引添加向量数据，<code>index.is_traned</code>查看索引是否已经训练，<code>index.ntotal</code>索引向量数量</p>
</li>
<li>
<p>一些索引还可以存储与每个向量对应的整数<code>ID</code>（但不是<code>IndexFlatL2</code>）。 如果未提供<code>ID</code>，则<code>add</code>仅使用向量序号作为<code>ID</code>。即，第一个向量为 0，第二个为&nbsp;1，依此类推。</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">index</span> <span class="o">=</span> <span class="n">faiss</span><span class="o">.</span><span class="n">IndexFlatL2</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>    <span class="c1"># 创建索引</span>
<span class="nb">print</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">is_trained</span><span class="p">)</span>
<span class="n">index</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">xb</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">ntotal</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>True
1000
</code></pre></div>

<h3 id="3">3.搜索</h3>
<ul>
<li>
<p>可以对索引执行的基本搜索操作是<code>k-最近邻搜索</code>，即。 对于每个查询向量，在数据库中找到它的<code>k</code>个最近的邻居。</p>
</li>
<li>
<p>这个操作的结果可以方便地存储在一个大小为<code>nq * k</code>的整数矩阵中，其中第<code>i</code>行包含查询向量<code>i</code>的邻居的<code>ID</code>，按距离增加排序。 除了这个矩阵之外，搜索操作还返回一个具有相应平方距离的<code>nq * k</code>浮点矩阵。(<code>ID</code>矩阵和距离矩阵)</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">k</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">D</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">xb</span><span class="p">[:</span><span class="mi">5</span><span class="p">],</span> <span class="n">k</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">I</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="k">[[  0 274 495 509]</span>
<span class="w"> </span><span class="k">[  1 860 391 676]</span>
<span class="w"> </span><span class="k">[  2 278 197 144]</span>
<span class="w"> </span><span class="k">[  3 400 781 106]</span>
<span class="w"> </span><span class="k">[  4 505  36 483]]</span>
<span class="k">[[0.        6.9914494 7.450281  7.777972 ]</span>
<span class="w"> </span><span class="k">[0.        7.223036  7.5612698 7.563117 ]</span>
<span class="w"> </span><span class="k">[0.        6.3398957 7.187016  7.2561207]</span>
<span class="w"> </span><span class="k">[0.        6.401422  6.5932446 7.007648 ]</span>
<span class="w"> </span><span class="k">[0.        5.6738653 6.231701  6.7210436]]</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">D</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">xq</span><span class="p">[:</span><span class="mi">5</span><span class="p">],</span> <span class="n">k</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">I</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="k">[[502  85 606 234]</span>
<span class="w"> </span><span class="k">[444 699 636 436]</span>
<span class="w"> </span><span class="k">[432 148 629 524]</span>
<span class="w"> </span><span class="k">[629  38 515 945]</span>
<span class="w"> </span><span class="k">[303  33 919 307]]</span>
<span class="k">[[6.813346  6.9684916 7.0068817 7.0398655]</span>
<span class="w"> </span><span class="k">[6.5172014 6.7739353 6.8253922 6.8459854]</span>
<span class="w"> </span><span class="k">[7.1742516 8.173426  8.238693  8.29656  ]</span>
<span class="w"> </span><span class="k">[6.794969  6.981325  7.088125  7.1704335]</span>
<span class="w"> </span><span class="k">[5.7955394 6.356456  7.205101  7.23569  ]]</span>
</code></pre></div>

<h3 id="4">4.更快速搜索</h3>
<div class="highlight"><pre><span></span><code><span class="n">nlist</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">quantizer</span> <span class="o">=</span> <span class="n">faiss</span><span class="o">.</span><span class="n">IndexFlatL2</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">faiss</span><span class="o">.</span><span class="n">IndexIVFFlat</span><span class="p">(</span><span class="n">quantizer</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">nlist</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">is_trained</span><span class="p">)</span>
<span class="n">index</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">xb</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">is_trained</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>False
True
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">index</span><span class="o">.</span><span class="n">add_with_ids</span><span class="p">(</span><span class="n">xb</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">2000</span><span class="p">))</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">index</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">xb</span><span class="p">[:</span><span class="mi">1</span><span class="p">],</span> <span class="mi">5</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="nx">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">.</span><span class="w">       </span><span class="p">,</span><span class="w"> </span><span class="m m-Double">7.7962465</span><span class="p">,</span><span class="w"> </span><span class="m m-Double">8.162846</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="m m-Double">8.279927</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="m m-Double">8.418131</span><span class="w"> </span><span class="p">]],</span>
<span class="w">       </span><span class="nx">dtype</span><span class="p">=</span><span class="nx">float32</span><span class="p">),</span>
<span class="w"> </span><span class="nx">array</span><span class="p">([[</span><span class="mi">1000</span><span class="p">,</span><span class="w"> </span><span class="mi">1318</span><span class="p">,</span><span class="w"> </span><span class="mi">1541</span><span class="p">,</span><span class="w"> </span><span class="mi">1225</span><span class="p">,</span><span class="w"> </span><span class="mi">1121</span><span class="p">]]))</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">index</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">xb</span><span class="p">)</span>
<span class="c1"># index.nprobe = 5    # 默认为1</span>
<span class="n">D</span><span class="p">,</span> <span class="n">I</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">xq</span><span class="p">[:</span><span class="mi">5</span><span class="p">],</span> <span class="n">k</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">I</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="k">[[466 205 137 147]</span>
<span class="w"> </span><span class="k">[436 371 220 606]</span>
<span class="w"> </span><span class="k">[629 524 318 402]</span>
<span class="w"> </span><span class="k">[515 945 733 891]</span>
<span class="w"> </span><span class="k">[303 606 341 473]]</span>
<span class="k">[[7.2691383 7.389188  7.9478083 7.973056 ]</span>
<span class="w"> </span><span class="k">[6.8459854 6.9232197 7.1473436 7.42725  ]</span>
<span class="w"> </span><span class="k">[8.238693  8.29656   8.312122  8.395692 ]</span>
<span class="w"> </span><span class="k">[7.088125  7.1704335 7.4821615 7.6420956]</span>
<span class="w"> </span><span class="k">[5.7955394 7.6942344 8.055542  8.17235  ]]</span>
</code></pre></div>


             
 
                <p id="post-share-links">
    Share on:
      <a href="https://twitter.com/intent/tweet?text=Faiss&url=http%3A//www.jerrylsu.net/articles/Faiss.html&hashtags=machine-learning,faiss" target="_blank" rel="nofollow noopener noreferrer" title="Share on Twitter">Twitter</a>
 ❄       <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A//www.jerrylsu.net/articles/Faiss.html" target="_blank" rel="nofollow noopener noreferrer" title="Share on Facebook">Facebook</a>
 ❄       <a href="mailto:?subject=Faiss&amp;body=http%3A//www.jerrylsu.net/articles/Faiss.html" target="_blank" rel="nofollow noopener noreferrer" title="Share via Email">Email</a>

            
            







<section>
    <h6 style="display:none;">Comments</h6>
    <p id="comment-message"> </p>

    <div class="accordion" id="accordion2">
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle disqus-comment-count comment-count collapsed"
                   data-toggle="collapse"
                   data-parent="#accordion2"
                   href="../articles/Faiss.html#comment_thread"
                   id="comment-accordion-toggle">
                    Comments
                </a>
            </div>
            <div id="comment_thread" class="accordion-body collapse">
                <div class="accordion-inner">
                    <div class="comments">



                        <div class="commentbox" id="../articles/Faiss.html"></div>
<script src="https://unpkg.com/commentbox.io/dist/commentBox.min.js"></script>
<script>
    commentBox("True", {
        onCommentCount(count) {
            const ele = document.querySelector("#comment-accordion-toggle")
            if (ele && count > 0) {
                ele.innerText = `${count} Comment${count > 1 ? 's' : ''}`
            }
        }
    });
</script>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

            <hr/>
<section>
    <h2>Related Posts</h2>
<ul class="related-posts-list">
<li><a href="../articles/Automated-Feature-Engineering:-Featuretools.html" title="Automated Feature Engineering: Featuretools">Automated Feature Engineering: Featuretools</a></li>
<li><a href="../articles/Logistic-Regression.html" title="Logistic Regression">Logistic Regression</a></li>
<li><a href="../articles/Cross-Validation-CV.html" title="Cross Validation-CV">Cross Validation-CV</a></li>
<li><a href="../articles/Binomial-distribution.html" title="Binomial distribution">Binomial distribution</a></li>
<li><a href="../articles/Scipy-stats.html" title="Scipy stats">Scipy stats</a></li>
</ul>
<hr />
</section>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">« <a href="../articles/Docker-Python-Mysql.html" title="Previous: Docker Python Mysql">Docker Python Mysql</a></li>
                <li class="next-article"><a href="../articles/Bert-as-Service.html" title="Next: Bert as Service">Bert as Service</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2021-09-17T10:17:17+08:00">Sep 17, 2021</time>
            <h4>Category</h4>
            <a class="category-link" href="../categories.html#ml-ref">ML</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="../tags.html#faiss-ref">Faiss
                    <span class="superscript">1</span>
</a></li>
                <li><a href="../tags.html#machine-learning-ref">Machine Learning
                    <span class="superscript">13</span>
</a></li>
            </ul>
<h4>Contact</h4>
<div id="sidebar-social-link">
    <a href="mailto:[email protected]" title="sa517301@mail.ustc.edu.cn" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="Mail" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#328cff"/><path d="m250 186c-46 0-69 35-69 74 0 44 29 72 68 72 43 0 73-32 73-75 0-44-34-71-72-71zm-1-37c30 0 57 13 77 33 0-22 35-22 35 1v150c-1 10 10 16 16 9 25-25 54-128-14-187-64-56-149-47-195-15-48 33-79 107-49 175 33 76 126 99 182 76 28-12 41 26 12 39-45 19-168 17-225-82-38-68-36-185 67-248 78-46 182-33 244 32 66 69 62 197-2 246-28 23-71 1-71-32v-11c-20 20-47 32-77 32-57 0-108-51-108-108 0-58 51-110 108-110" fill="#fff"/></svg>
    </a>
    <a href="https://github.com/jerrylsu" title="Jerry Github" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="GitHub" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1B1817"/><path fill="#fff" d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg>
    </a>
    <a href="https://www.youtube.com/@jerrysu780" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="YouTube" role="img" viewBox="0 0 512 512" fill="#ed1d24"><rect width="512" height="512" rx="15%"/><path d="m427 169c-4-15-17-27-32-31-34-9-239-10-278 0-15 4-28 16-32 31-9 38-10 135 0 174 4 15 17 27 32 31 36 10 241 10 278 0 15-4 28-16 32-31 9-36 9-137 0-174" fill="#fff"/><path d="m220 203v106l93-53"/></svg>
    </a>
    <a href="https://twitter.com/Jerrylsu666" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="Twitter" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#1da1f3"/><path fill="#fff" d="M437 152a72 72 0 0 1-40 12 72 72 0 0 0 32-40 72 72 0 0 1-45 17 72 72 0 0 0-122 65 200 200 0 0 1-145-74 72 72 0 0 0 22 94 72 72 0 0 1-32-7 72 72 0 0 0 56 69 72 72 0 0 1-32 1 72 72 0 0 0 67 50 200 200 0 0 1-105 29 200 200 0 0 0 309-179 200 200 0 0 0 35-37"/></svg>
    </a>
    <a href="http://www.jerrylsu.net/feeds/all.atom.xml" title="" target="_blank" rel="nofollow noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" aria-label="RSS" role="img" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#f80"/><circle cx="145" cy="367" r="35" fill="#fff"/><path fill="none" stroke="#fff" stroke-width="60" d="M109 241c89 0 162 73 162 162M109 127c152 0 276 124 276 276"/></svg>
    </a>
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="../theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>